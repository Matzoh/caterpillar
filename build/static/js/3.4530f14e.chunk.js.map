{"version":3,"sources":["Components/Global/Dialog/components/signInDialog/index.module.scss","Components/Global/Dialog/components/signInDialog/index.js"],"names":["module","exports","connect","state","userInfo","user","props","hasSignedToday","signinDays","signinConf","useState","ani","setAni","aniRef","useRef","useEffect","handleSign","a","signin","storeUtil","setUserInfo","getUserInfo","setTimeout","canvas","current","confetti","create","resize","particleCount","angle","spread","origin","y","x","zIndex","ticks","scalar","e","className","style","wrapper","icon","title","hit","list_wrapper","Array","from","length","map","item","index","active","label","width","height","ref","item_text","item_icon","coin","numSymbol","rewards"],"mappings":"kGACAA,EAAOC,QAAU,CAAC,wBAA0B,8CAA8C,QAAU,8BAA8B,KAAO,2BAA2B,MAAQ,4BAA4B,IAAM,0BAA0B,aAAe,mCAAmC,KAAO,2BAA2B,OAAS,6BAA6B,MAAQ,4BAA4B,IAAM,0BAA0B,UAAY,gCAAgC,UAAY,gCAAgC,KAAO,2BAA2B,UAAY,gCAAgC,WAAa,iCAAiC,OAAS,6BAA6B,IAAM,0BAA0B,WAAW,iC,uJCoF5rBC,uBANS,SAACC,GACvB,MAAO,CACLC,SAAUD,EAAME,KAAKD,UAAY,MAItBF,EA7EI,WAAiB,IAAhBI,EAAe,uDAAP,GAAO,EACuBA,EAAMF,UAAY,GAAlEG,EADyB,EACzBA,eAAgBC,EADS,EACTA,WADS,IACGC,kBADH,MACgB,GADhB,IAEXC,oBAAS,GAFE,mBAE1BC,EAF0B,KAErBC,EAFqB,KAG3BC,EAASC,iBAAO,MAEtBC,qBAAU,WACRC,MACC,CAACT,IAEJ,IAAMS,EAAU,uCAAG,sBAAAC,EAAA,yDACZV,EADY,gCAETW,cAFS,OAGfC,IAAUC,YAAV,2BACKD,IAAUE,eADf,IAEEd,gBAAgB,EAChBC,WAAYW,IAAUE,cAAcb,WAAa,KAEnDI,GAAO,GACPU,YAAW,WACT,IACE,IAAIC,EAASV,EAAOW,QACpBD,EAAOE,SACLF,EAAOE,UAAYA,IAASC,OAAOH,EAAQ,CAAEI,QAAQ,IAEvDJ,EAAOE,SAAS,CACdG,cAAe,IACfC,MAAO,GACPC,OAAQ,IACRC,OAAQ,CAAEC,EAAG,IAAKC,EAAG,IACrBC,OAAQ,IACRC,MAAO,IACPC,OAAQ,KAEV,MAAOC,OACR,KAzBY,2CAAH,qDA4BhB,OACE,sBAAKC,UAAWC,IAAMC,QAAtB,UACE,qBAAKF,UAAS,UAAKC,IAAME,QACzB,qBAAKH,UAAWC,IAAMG,MAAtB,0BACA,qBAAKJ,UAAWC,IAAMI,IAAtB,2EAGA,qBAAKL,UAAWC,IAAMK,aAAtB,SACGC,MAAMC,KAAK,CAAEC,OAAQ,IAAKC,KAAI,SAACC,EAAMC,GACpC,OACE,sBACEZ,UAAS,UAAKC,IAAMU,KAAX,YACPC,EAAQ1C,EAAa+B,IAAMY,OAAS,GAD7B,YAELD,GAAS1C,EAAa,GAAKG,EAAM4B,IAAM5B,IAAM,IAHnD,UAKGuC,EAAQ1C,EAAa,qBAAK8B,UAAWC,IAAMa,QAAgB,GAC3DF,GAAS1C,EAAa,GAAKG,EAC1B,wBAAQ0C,MAAO,OAAQC,OAAQ,OAAQC,IAAK1C,IAE5C,GAGF,sBAAKyB,UAAWC,IAAMiB,UAAtB,iBAAsCN,EAAQ,KAC9C,qBAAKZ,UAAWC,IAAMkB,YACtB,qBAAKnB,UAAWC,IAAMmB,KAAtB,SACGC,aAAWlD,EAAWmD,SAAW,IAAIV,EAAQ,IAAM,OAXjDA","file":"static/js/3.4530f14e.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"caterpillar_dialog_hide\":\"signInDialog_caterpillar_dialog_hide__3a_kx\",\"wrapper\":\"signInDialog_wrapper__1kHQ8\",\"icon\":\"signInDialog_icon__1Zkta\",\"title\":\"signInDialog_title__nRxdu\",\"hit\":\"signInDialog_hit__193Ay\",\"list_wrapper\":\"signInDialog_list_wrapper__3z7t7\",\"item\":\"signInDialog_item__3H3mv\",\"active\":\"signInDialog_active__1N8-m\",\"label\":\"signInDialog_label__3yJAL\",\"ani\":\"signInDialog_ani__2UfNL\",\"item_text\":\"signInDialog_item_text__VNp43\",\"item_icon\":\"signInDialog_item_icon__1gwKw\",\"coin\":\"signInDialog_coin__13Zbw\",\"scrolling\":\"signInDialog_scrolling__3Bmrd\",\"colorCycle\":\"signInDialog_colorCycle__28qmJ\",\"rotate\":\"signInDialog_rotate__3hI0a\",\"run\":\"signInDialog_run__v0eyK\",\"slide-up\":\"signInDialog_slide-up__2jLsB\"};","import React, { useEffect, useRef, useState } from 'react'\nimport { connect } from 'react-redux'\nimport style from './index.module.scss'\nimport { numSymbol } from '@/Utils/util'\nimport { signin } from '@/Helper/apis/home'\nimport confetti from 'canvas-confetti'\nimport storeUtil from '@/Utils/store'\n\nconst SignDialog = (props = {}) => {\n  const { hasSignedToday, signinDays, signinConf = {} } = props.userInfo || {}\n  const [ani, setAni] = useState(false)\n  const aniRef = useRef(null)\n\n  useEffect(() => {\n    handleSign()\n  }, [hasSignedToday])\n\n  const handleSign = async () => {\n    if (!hasSignedToday) {\n      await signin()\n      storeUtil.setUserInfo({\n        ...storeUtil.getUserInfo(),\n        hasSignedToday: true,\n        signinDays: storeUtil.getUserInfo().signinDays + 1,\n      })\n      setAni(true)\n      setTimeout(() => {\n        try {\n          let canvas = aniRef.current\n          canvas.confetti =\n            canvas.confetti || confetti.create(canvas, { resize: true })\n\n          canvas.confetti({\n            particleCount: 300,\n            angle: 90,\n            spread: 180,\n            origin: { y: 1.5, x: 0.5 },\n            zIndex: 100,\n            ticks: 500,\n            scalar: 0.7,\n          })\n        } catch (e) {}\n      }, 500)\n    }\n  }\n  return (\n    <div className={style.wrapper}>\n      <div className={`${style.icon}`}></div>\n      <div className={style.title}>Daily reward</div>\n      <div className={style.hit}>\n        Accrue coins for logging into the game daily without skipping\n      </div>\n      <div className={style.list_wrapper}>\n        {Array.from({ length: 7 }).map((item, index) => {\n          return (\n            <div\n              className={`${style.item} ${\n                index < signinDays ? style.active : ''\n              } ${index == signinDays - 1 && ani ? style.ani : ''}`}\n              key={index}>\n              {index < signinDays ? <div className={style.label}></div> : ''}\n              {index == signinDays - 1 && ani ? (\n                <canvas width={'100%'} height={'100%'} ref={aniRef}></canvas>\n              ) : (\n                ''\n              )}\n\n              <div className={style.item_text}>Day {index + 1}</div>\n              <div className={style.item_icon}></div>\n              <div className={style.coin}>\n                {numSymbol((signinConf.rewards || {})[index + 1] || 0)}\n              </div>\n            </div>\n          )\n        })}\n      </div>\n    </div>\n  )\n}\nconst mapStateToProps = (state) => {\n  return {\n    userInfo: state.user.userInfo || {},\n  }\n}\n\nexport default connect(mapStateToProps)(SignDialog)\n"],"sourceRoot":""}