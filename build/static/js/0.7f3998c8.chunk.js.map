{"version":3,"sources":["Components/Global/Dialog/components/shareDialog/index.module.scss","Helper/apis/earn.js","Components/Button/index.js","Components/Button/index.module.scss","Components/Received/index.js","Components/Received/index.module.scss","CommonUse/interVal/index.js","Components/Global/Dialog/components/shareDialog/index.js"],"names":["module","exports","getTaskList","params","isLoading","a","ajax","get","res","storeUtil","setEarnInfo","console","log","completeTask","otherConfig","post","Button","onClick","disabled","txt","className","styles","btn","loading","loading_icon","Received","style","received","copied_icon","received_txt","UseInterval","props","changeArr","isStop","isStart","clickTime","delayTime","interVal","useRef","useState","isFinished","setIsFinished","startFlag","setStartFlag","leftTime","setLeftTime","intervalFun","clearInterval","current","subTime","Math","ceil","sub","div","Date","getTime","useEffect","setInterval","CONFIG","x","title","tg","connect","state","shareClickTime","behavior","rewardCoins","shareType","icon","id","completed","setCompleted","setIsLoading","isShowSuccess","setIsShowSuccess","time","getShareClickTime","DELAYTIME","handleConfirm","taskId","handleJoin","setShareClickTime","openLink","link","openTelegramLink","wrapper","coin_wrapper","numSymbol","join","start"],"mappings":"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","file":"static/js/0.7f3998c8.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"shareDialog_root__1d7Kr\",\"caterpillar_dialog_hide\":\"shareDialog_caterpillar_dialog_hide__aH1Jl\",\"wrapper\":\"shareDialog_wrapper__-JGYe\",\"icon\":\"shareDialog_icon__3DNEc\",\"x\":\"shareDialog_x__1LMvc\",\"tg\":\"shareDialog_tg__f9aHM\",\"title\":\"shareDialog_title__m__ga\",\"join\":\"shareDialog_join__3B_we\",\"loading\":\"shareDialog_loading__19Unh\",\"coin_wrapper\":\"shareDialog_coin_wrapper__3Ve9m\",\"btn\":\"shareDialog_btn__6fWl8\",\"start\":\"shareDialog_start__1Ej1s\",\"received\":\"shareDialog_received__33eS6\",\"success\":\"shareDialog_success__h3eY_\",\"success_txt\":\"shareDialog_success_txt__20fD2\",\"success_icon\":\"shareDialog_success_icon__1ArvL\",\"scrolling\":\"shareDialog_scrolling__2YYYR\",\"colorCycle\":\"shareDialog_colorCycle__2IW7p\",\"rotate\":\"shareDialog_rotate__R7VTp\",\"run\":\"shareDialog_run__1rLUa\",\"scaleAni\":\"shareDialog_scaleAni__iYwBp\",\"slide-up\":\"shareDialog_slide-up__3MeIu\"};","import ajax from '@/Helper/ajax.js'\nimport storeUtil from '@/Utils/store'\nexport const getTaskList = async (params, isLoading) => {\n  const res = await ajax.get('tasks', params, isLoading)\n  storeUtil.setEarnInfo(res)\n  console.log(res, 'res====')\n  return res\n}\n\nexport const completeTask = async (params, otherConfig = {}) => {\n  const res = await ajax.post(\n    'tasks/complete',\n    params,\n    false,\n    false,\n    otherConfig\n  )\n  return res\n}\n","import React from 'react'\nimport styles from './index.module.scss'\n\nconst Button = ({\n  isLoading,\n  onClick = () => {},\n  disabled,\n  txt,\n  className = '',\n}) => {\n  return (\n    <div\n      className={`${styles.btn} ${disabled ? styles.disabled : ''} ${\n        isLoading ? styles.loading : ''\n      } ${className}`}\n      onClick={() => {\n        if (!disabled && !isLoading) onClick()\n      }}>\n      {isLoading ? <div className={styles.loading_icon}></div> : txt}\n    </div>\n  )\n}\n\nexport default Button\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"Button_root__2qdki\",\"caterpillar_dialog_hide\":\"Button_caterpillar_dialog_hide__2TgKO\",\"btn\":\"Button_btn__17eJW\",\"loading_icon\":\"Button_loading_icon__3JKEg\",\"rotate\":\"Button_rotate__2NYf5\",\"disabled\":\"Button_disabled__1bkys\",\"scrolling\":\"Button_scrolling__3fuaa\",\"colorCycle\":\"Button_colorCycle__1b4Vb\",\"run\":\"Button_run__38xbQ\",\"scaleAni\":\"Button_scaleAni__2gahT\",\"slide-up\":\"Button_slide-up__1g_tb\"};","import React from 'react'\nimport style from './index.module.scss'\n\nconst Received = ({\n  txt = 'The task is completed! Your coin reward isalready paid out.',\n}) => {\n  return (\n    <div className={style.received}>\n      <div className={style.copied_icon}></div>\n      <div className={style.received_txt}>{txt}</div>\n    </div>\n  )\n}\n\nexport default Received\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"Received_root__1i1yK\",\"caterpillar_dialog_hide\":\"Received_caterpillar_dialog_hide__rc16s\",\"received\":\"Received_received__176aM\",\"copied_icon\":\"Received_copied_icon__1WGJH\",\"received_txt\":\"Received_received_txt__3e3sr\",\"scrolling\":\"Received_scrolling__1GTRL\",\"colorCycle\":\"Received_colorCycle__2cQNP\",\"rotate\":\"Received_rotate__fywHG\",\"run\":\"Received_run__2Y7kP\",\"scaleAni\":\"Received_scaleAni__4pYYX\",\"slide-up\":\"Received_slide-up__2GJco\"};","import { div, sub } from '@/Utils/math'\nimport React, { useState, useEffect, useRef } from 'react'\n\nconst UseInterval = (props) => {\n  const {\n    changeArr,\n    isStop = () => {\n      return true\n    },\n    isStart = () => {\n      return false\n    },\n    clickTime = '',\n    delayTime = 30,\n  } = props\n\n  const interVal = useRef(null)\n  const [isFinished, setIsFinished] = useState(false)\n  const [startFlag, setStartFlag] = useState(false)\n  const [leftTime, setLeftTime] = useState(0)\n\n  const intervalFun = () => {\n    let startFlag = isStart()\n    setStartFlag(startFlag)\n    if (!startFlag) {\n      return clearInterval(interVal.current)\n    }\n    let isFinished = isStop()\n    if (isFinished) {\n      clearInterval(interVal.current)\n      setLeftTime(0)\n    } else {\n      let subTime = Math.ceil(\n        sub(delayTime, div(sub(new Date().getTime(), clickTime), 1000))\n      )\n      setLeftTime(`00:${subTime < 10 ? `0${subTime}` : subTime}`)\n    }\n    setIsFinished(isFinished)\n  }\n\n  useEffect(() => {\n    if (interVal.current) {\n      clearInterval(interVal.current)\n    }\n\n    intervalFun()\n    interVal.current = setInterval(() => {\n      intervalFun()\n    }, 1000)\n\n    return () => {\n      clearInterval(interVal.current)\n    }\n  }, [...changeArr])\n\n  return { isFinished, startFlag, leftTime }\n}\n\nexport default UseInterval\n","import React, { useState } from 'react'\nimport { connect } from 'react-redux'\nimport style from './index.module.scss'\nimport Received from '@/Components/Received'\nimport storeUtil from '@/Utils/store'\nimport UseInterval from '@/CommonUse/interVal'\nimport Button from '@/Components/Button'\nimport { completeTask, getTaskList } from '@/Helper/apis/earn'\nimport { openTelegramLink, openLink } from '@telegram-apps/sdk'\nimport { numSymbol } from '@/Utils/util'\n\nconst CONFIG = {\n  x: {\n    title: 'Follow our X account',\n  },\n  tg: {\n    title: 'Join our TG channel',\n  },\n}\n\nconst DELAYTIME = 60\n\nconst ShareDialog = (props = {}) => {\n  const { rewardCoins, shareType = 'tg', icon, id } = props\n  const [completed, setCompleted] = useState(props.completed)\n  const [isLoading, setIsLoading] = useState(false)\n  const [isShowSuccess, setIsShowSuccess] = useState(false)\n\n  const { isFinished, startFlag, leftTime } = UseInterval({\n    changeArr: [(props.shareClickTime || {})[shareType + id]],\n    clickTime: (props.shareClickTime || {})[shareType + id],\n    delayTime: DELAYTIME,\n    isStop: () => {\n      let time = (storeUtil.getShareClickTime() || {})[shareType + id]\n      return time && new Date().getTime() - time > DELAYTIME * 1000\n    },\n    isStart: () => {\n      let time = (storeUtil.getShareClickTime() || {})[shareType + id]\n      return !!time\n    },\n  })\n\n  const handleConfirm = async () => {\n    if (!isFinished) {\n      return\n    }\n    // 请求接口获取金币\n    setIsLoading(true)\n    try {\n      await completeTask({\n        taskId: id,\n      })\n      setCompleted(true)\n      setIsShowSuccess(true)\n      // 更新分享页面数据\n      getTaskList()\n    } catch (err) {}\n    setIsLoading(false)\n  }\n\n  const handleJoin = () => {\n    if (!(storeUtil.getShareClickTime() || {})[shareType + id]) {\n      storeUtil.setShareClickTime({\n        ...storeUtil.getShareClickTime(),\n        [shareType + id]: new Date().getTime(),\n      })\n    }\n\n    if (shareType === 'tg') {\n      openTelegramLink(props.link)\n      return\n    }\n    openLink(props.link)\n  }\n\n  return (\n    <div className={style.wrapper}>\n      <div className={`${style.icon} ${style[icon]}`}></div>\n      <div className={style.coin_wrapper}>{numSymbol(rewardCoins)}</div>\n      <div className={style.title}>{CONFIG[shareType].title}</div>\n      <div className={style.join} onClick={handleJoin}>\n        JOIN\n      </div>\n      {!completed ? (\n        <>\n          {!isFinished && startFlag ? (\n            <div className={style.loading}>\n              Wait 1 minuter for moderation check toclaim the prize\n            </div>\n          ) : null}\n          <Button\n            className={`${style.btn} ${startFlag ? style.start : ''}`}\n            onClick={handleConfirm}\n            isLoading={isLoading}\n            disabled={!isFinished}\n            txt={isFinished || !startFlag ? 'CHECK THE TASK' : leftTime}\n          />\n        </>\n      ) : isShowSuccess ? (\n        <div className={style.received}>\n          <Received />\n        </div>\n      ) : (\n        ''\n      )}\n    </div>\n  )\n}\nconst mapStateToProps = (state) => {\n  return {\n    shareClickTime: state.behavior.shareClickTime || {},\n  }\n}\n\nexport default connect(mapStateToProps)(ShareDialog)\n"],"sourceRoot":""}