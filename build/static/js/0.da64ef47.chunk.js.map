{"version":3,"sources":["Components/Global/Dialog/components/shareDialog/index.module.scss","Helper/apis/earn.js","Components/Button/index.js","Components/Button/index.module.scss","Components/Received/index.js","Components/Received/index.module.scss","CommonUse/interVal/index.js","Components/Global/Dialog/components/shareDialog/index.js"],"names":["module","exports","getTaskList","params","isLoading","a","ajax","get","res","storeUtil","setEarnInfo","console","log","completeTask","otherConfig","post","Button","onClick","disabled","txt","className","styles","btn","loading","loading_icon","Received","style","received","copied_icon","received_txt","UseInterval","props","changeArr","isStop","isStart","interVal","useRef","useState","isFinished","setIsFinished","startFlag","setStartFlag","useEffect","current","clearInterval","setInterval","CONFIG","x","title","tg","connect","state","shareClickTime","behavior","rewardCoins","shareType","icon","id","completed","setCompleted","setIsLoading","isShowSuccess","setIsShowSuccess","time","getShareClickTime","Date","getTime","handleConfirm","taskId","handleJoin","setShareClickTime","jumpUrl","link","wrapper","coin_wrapper","join","start"],"mappings":"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","file":"static/js/0.da64ef47.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"caterpillar_dialog_hide\":\"shareDialog_caterpillar_dialog_hide__2_H7O\",\"wrapper\":\"shareDialog_wrapper__l1Maq\",\"icon\":\"shareDialog_icon__3WHeY\",\"x\":\"shareDialog_x__AOyLJ\",\"tg\":\"shareDialog_tg__1_upr\",\"title\":\"shareDialog_title__2796E\",\"join\":\"shareDialog_join__3ic1c\",\"loading\":\"shareDialog_loading__3gxTY\",\"coin_wrapper\":\"shareDialog_coin_wrapper__2LDWI\",\"btn\":\"shareDialog_btn__1Urxb\",\"start\":\"shareDialog_start__3YRaL\",\"received\":\"shareDialog_received__2mJJr\",\"success\":\"shareDialog_success__7pprp\",\"success_txt\":\"shareDialog_success_txt__5WW6Q\",\"success_icon\":\"shareDialog_success_icon__EIUUM\",\"scrolling\":\"shareDialog_scrolling__2NgzU\",\"colorCycle\":\"shareDialog_colorCycle__1OHiR\",\"rotate\":\"shareDialog_rotate__3kOq_\",\"run\":\"shareDialog_run__3-A1J\",\"slide-up\":\"shareDialog_slide-up__2462Z\"};","import ajax from '@/Helper/ajax.js'\nimport storeUtil from '@/Utils/store'\nexport const getTaskList = async (params, isLoading) => {\n  const res = await ajax.get('tasks', params, isLoading)\n  storeUtil.setEarnInfo(res)\n  console.log(res, 'res====')\n  return res\n}\n\nexport const completeTask = async (params, otherConfig = {}) => {\n  const res = await ajax.post(\n    'tasks/complete',\n    params,\n    false,\n    false,\n    otherConfig\n  )\n  return res\n}\n","import React from 'react'\nimport styles from './index.module.scss'\n\nconst Button = ({\n  isLoading,\n  onClick = () => {},\n  disabled,\n  txt,\n  className = '',\n}) => {\n  return (\n    <div\n      className={`${styles.btn} ${disabled ? styles.disabled : ''} ${\n        isLoading ? styles.loading : ''\n      } ${className}`}\n      onClick={() => {\n        if (!disabled && !isLoading) onClick()\n      }}>\n      {isLoading ? <div className={styles.loading_icon}></div> : txt}\n    </div>\n  )\n}\n\nexport default Button\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"caterpillar_dialog_hide\":\"Button_caterpillar_dialog_hide__2tq6j\",\"btn\":\"Button_btn__aebND\",\"loading_icon\":\"Button_loading_icon__129-v\",\"rotate\":\"Button_rotate__1jiyn\",\"disabled\":\"Button_disabled__3cERt\",\"scrolling\":\"Button_scrolling__2XRNT\",\"colorCycle\":\"Button_colorCycle__3nug0\",\"run\":\"Button_run__3iO9P\",\"slide-up\":\"Button_slide-up__2p_wO\"};","import React from 'react'\nimport style from './index.module.scss'\n\nconst Received = ({\n  txt = 'The task is completed! Your coin reward isalready paid out.',\n}) => {\n  return (\n    <div className={style.received}>\n      <div className={style.copied_icon}></div>\n      <div className={style.received_txt}>{txt}</div>\n    </div>\n  )\n}\n\nexport default Received\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"caterpillar_dialog_hide\":\"Received_caterpillar_dialog_hide__397al\",\"received\":\"Received_received__1Ilog\",\"copied_icon\":\"Received_copied_icon__1SqkM\",\"received_txt\":\"Received_received_txt__5k6DP\",\"scrolling\":\"Received_scrolling__3kNIc\",\"colorCycle\":\"Received_colorCycle__1-yWG\",\"rotate\":\"Received_rotate__1hKa7\",\"run\":\"Received_run__PFkf1\",\"slide-up\":\"Received_slide-up__2007O\"};","import React, { useState, useEffect, useRef } from 'react'\n\nconst UseInterval = (props) => {\n  const {\n    changeArr,\n    isStop = () => {\n      return true\n    },\n    isStart = () => {\n      return false\n    },\n  } = props\n\n  const interVal = useRef(null)\n  const [isFinished, setIsFinished] = useState(false)\n  const [startFlag, setStartFlag] = useState(false)\n\n  useEffect(() => {\n    if (interVal.current) {\n      clearInterval(interVal.current)\n    }\n    interVal.current = setInterval(() => {\n      let startFlag = isStart()\n      setStartFlag(startFlag)\n      if (!startFlag) {\n        return clearInterval(interVal.current)\n      }\n      let isFinished = isStop()\n      if (isFinished) {\n        setStartFlag(false)\n        clearInterval(interVal.current)\n      }\n      setIsFinished(isFinished)\n    }, 1000)\n\n    return () => {\n      clearInterval(interVal.current)\n    }\n  }, [...changeArr])\n\n  return { isFinished, startFlag }\n}\n\nexport default UseInterval\n","import React, { useState } from 'react'\nimport { connect } from 'react-redux'\nimport style from './index.module.scss'\nimport Received from '@/Components/Received'\nimport storeUtil from '@/Utils/store'\nimport UseInterval from '@/CommonUse/interVal'\nimport Button from '@/Components/Button'\nimport { completeTask, getTaskList } from '@/Helper/apis/earn'\nimport { jumpUrl } from '@/Utils/common'\n\nconst CONFIG = {\n  x: {\n    title: 'Follow our X account',\n  },\n  tg: {\n    title: 'Join our TG channel',\n  },\n}\n\nconst ShareDialog = (props = {}) => {\n  const { rewardCoins, shareType = 'tg', icon, id } = props\n  const [completed, setCompleted] = useState(props.completed)\n  const [isLoading, setIsLoading] = useState(false)\n  const [isShowSuccess, setIsShowSuccess] = useState(false)\n\n  const { isFinished, startFlag } = UseInterval({\n    changeArr: [props.shareClickTime[shareType]],\n    isStop: () => {\n      let time = storeUtil.getShareClickTime()[shareType + id]\n      return time && new Date().getTime() - time > 60000\n    },\n    isStart: () => {\n      let time = storeUtil.getShareClickTime()[shareType + id]\n      return !!time\n    },\n  })\n\n  const handleConfirm = async () => {\n    if (!isFinished) {\n      return\n    }\n    // 请求接口获取金币\n    setIsLoading(true)\n    try {\n      await completeTask({\n        taskId: id,\n      })\n      setCompleted(true)\n      setIsShowSuccess(true)\n      // 更新分享页面数据\n      getTaskList()\n    } catch (err) {}\n    setIsLoading(false)\n  }\n\n  const handleJoin = () => {\n    storeUtil.setShareClickTime({\n      ...storeUtil.getShareClickTime(),\n      [shareType + id]: new Date().getTime(),\n    })\n\n    jumpUrl(props.link)\n  }\n\n  return (\n    <div className={style.wrapper}>\n      <div className={`${style.icon} ${style[icon]}`}></div>\n      <div className={style.coin_wrapper}>{rewardCoins}</div>\n      <div className={style.title}>{CONFIG[shareType].title}</div>\n      <div className={style.join} onClick={handleJoin}>\n        JOIN\n      </div>\n      {!completed ? (\n        <>\n          {!isFinished && startFlag ? (\n            <div className={style.loading}>\n              Wait 1 minuter for moderation check toclaim the prize\n            </div>\n          ) : null}\n          <Button\n            className={`${style.btn} ${startFlag ? style.start : ''}`}\n            onClick={handleConfirm}\n            isLoading={isLoading}\n            disabled={!isFinished}\n            txt=\"CHECK THE TASK\"\n          />\n        </>\n      ) : isShowSuccess ? (\n        <div className={style.received}>\n          <Received />\n        </div>\n      ) : (\n        ''\n      )}\n    </div>\n  )\n}\nconst mapStateToProps = (state) => {\n  return {\n    shareClickTime: state.behavior.shareClickTime || {},\n  }\n}\n\nexport default connect(mapStateToProps)(ShareDialog)\n"],"sourceRoot":""}